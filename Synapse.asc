Version 4
SHEET 1 2576 1444
WIRE 304 384 144 384
WIRE 528 384 384 384
WIRE 64 608 -80 608
WIRE 144 608 128 608
WIRE 320 608 224 608
WIRE 464 608 320 608
WIRE 640 608 608 608
WIRE 720 608 704 608
WIRE 1088 608 800 608
WIRE 1296 608 1088 608
WIRE 1376 608 1296 608
WIRE 1600 608 1376 608
WIRE -80 624 -80 608
WIRE 320 624 320 608
WIRE 1088 624 1088 608
WIRE 1600 688 1600 608
WIRE 1408 768 1312 768
WIRE 1488 768 1472 768
WIRE 1552 768 1488 768
WIRE 1488 784 1488 768
FLAG -80 704 0
FLAG 528 384 Vpost
FLAG 320 688 0
FLAG 464 688 0
FLAG 464 608 Vin
FLAG -80 608 Vspk
FLAG 144 384 Vpre
FLAG 1312 848 0
FLAG 1296 688 0
FLAG 1088 688 0
FLAG 608 688 0
FLAG 1600 864 0
FLAG 1488 864 0
FLAG 1376 608 Vmem
SYMBOL res 480 704 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value 10K
SYMBOL bv -80 608 R0
WINDOW 0 -52 16 Left 2
WINDOW 3 -192 88 Left 2
SYMATTR InstName B1
SYMATTR Value V=2*(v(Vpost)-v(Vpre))
SYMBOL res 400 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 -69 27 VTop 2
SYMATTR InstName R2
SYMATTR Value R=1/(v(Vmem)+{mc(0.000202,tol)})*{mc(6426871,tol)}-{mc(691000,tol)}
SYMBOL cap 304 624 R0
WINDOW 3 -61 51 Left 2
SYMATTR Value .1µ
SYMATTR InstName C1
SYMATTR SpiceLine V=16 Irms=7.41 Rser=0.000 Lser=0
SYMBOL res 240 592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10K
SYMBOL bv 1312 752 R0
WINDOW 0 -52 16 Left 2
WINDOW 3 -192 88 Left 2
SYMATTR InstName B2
SYMATTR Value V=abs(v(Vspk))
SYMBOL cap 1072 624 R0
WINDOW 3 25 53 Left 2
SYMATTR Value {mc(0.8n,tol)}
SYMATTR InstName C2
SYMATTR SpiceLine V=16 Irms=7.41 Rser=0.000 Lser=0
SYMBOL res 1312 704 R180
WINDOW 0 -38 58 Left 2
WINDOW 3 -223 32 Left 2
SYMATTR InstName R4
SYMATTR Value {mc(10000Meg,tol)}
SYMBOL res 816 592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {mc(50Meg,tol)}
SYMBOL bv 608 592 R0
WINDOW 0 -52 16 Left 2
WINDOW 3 28 94 Left 2
SYMATTR InstName B3
SYMATTR Value V={mc(0.14,tol)}*exp({mc(0.9,tol)}*v(Vin))
SYMBOL nmos 1552 688 R0
SYMATTR InstName M1
SYMBOL res 1584 768 R0
SYMATTR InstName R6
SYMATTR Value {mc(20Meg,tol)}
SYMBOL cap 1472 752 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 0.1n
SYMBOL res 1472 768 R0
SYMATTR InstName R7
SYMATTR Value 50k
SYMBOL diode 64 624 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value OGN4148
SYMBOL diode 640 624 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
TEXT -128 240 Left 2 !.model OGN4148 D(Is=4.5e-20 Rs=.568 N=1.752 Cjo=4p M=.4 tt=20n Iave=200m Vpk=75 mfg=OnSemi type=silicon)
TEXT 136 920 Left 2 ;Full Bridge Rectifier aka absolute value\nabsolute value for behavioral sources does some funky stufff
